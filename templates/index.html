<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Text Cleaner</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <style>
      /* Set Times New Roman font globally */
      body {
        font-family: "Times New Roman", Times, serif;
      }

      /* Animations */
      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(20px) scale(0.98);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      .animate-fadeInUp {
        animation: fadeInUp 0.6s ease-out forwards;
      }
      @keyframes glow {
        0% {
          box-shadow: 0 0 0px rgba(249, 115, 22, 0.3);
        }
        100% {
          box-shadow: 0 0 20px rgba(249, 115, 22, 0.5);
        }
      }
      .glow:hover {
        animation: glow 0.6s ease-in-out forwards;
      }

      /* Fade in for code section */
      .fade-in {
        animation: fadeInUp 0.5s ease-out forwards;
      }

      /* Particle animation */
      #particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
        background: transparent;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-white to-orange-50 min-h-screen flex flex-col items-center">
    <!-- Particle Background -->
    <canvas id="particles"></canvas>

    <!-- Header -->
    <header
      class="flex items-center justify-between w-full max-w-6xl px-10 py-4 border-b border-orange-200 bg-orange-100/70 backdrop-blur-md shadow-lg animate-fadeInUp"
    >
      <div class="flex items-center gap-3 text-orange-800">
        <svg
          viewBox="0 0 48 48"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6 text-orange-500"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M24 4H6V17.3333V30.6667H24V44H42V30.6667V17.3333H24V4Z"
            fill="currentColor"
          ></path>
        </svg>
        <h1 class="text-lg font-extrabold tracking-tight">Text Cleaner</h1>
      </div>
    </header>

    <!-- Main Container -->
    <main class="w-full max-w-5xl p-6 animate-fadeInUp">
      <div class="bg-white rounded-xl p-6 shadow-xl border border-orange-100">
        <h2 class="text-orange-600 text-3xl font-bold mb-4">
          Clean Your Text
        </h2>
        <form method="POST" class="flex flex-col gap-4">
          <!-- Input -->
          <textarea
            name="input_text"
            placeholder="Paste your text here"
            class="form-input w-full rounded-lg text-gray-800 bg-orange-50 border border-orange-200 p-4 min-h-[120px] placeholder:text-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400 transition duration-300 glow"
          >{{ input_text }}</textarea>

          <!-- Button -->
          <button
            type="submit"
            class="rounded-lg h-12 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-base font-bold tracking-wide hover:from-orange-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 glow"
          >
            Clean Text
          </button>
        </form>

        <!-- Output Section -->
        <div class="mt-6">
          <label class="block mb-2 text-orange-700 font-semibold">
            Output Text
          </label>
          <textarea
            readonly
            class="form-input w-full rounded-lg text-gray-800 bg-orange-50 border border-orange-200 p-4 min-h-[120px] placeholder:text-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400 transition duration-300"
          >{{ cleaned_text }}</textarea>
        </div>

        <!-- Toggle Arrow for Cleaning Code -->
        <div class="mt-6 flex items-center gap-2 cursor-pointer" id="toggleCodeBtn">
          <svg
            id="arrowIcon"
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 text-orange-500 transition-transform duration-300"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
          <span class="text-orange-700 font-semibold">Cleaning Code</span>
        </div>

        <!-- Cleaning Code Section (Initially Hidden) -->
        <div class="mt-6 hidden" id="cleaningCodeSection">
          <textarea
            readonly
            class="form-input w-full rounded-lg text-gray-800 bg-orange-50 border border-orange-200 p-4 min-h-[300px] placeholder:text-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400 transition duration-300"
          >{{ cleaning_code }}</textarea>
        </div>
      </div>
    </main>

    <!-- Particle Script -->
    <script>
      const canvas = document.getElementById("particles");
      const ctx = canvas.getContext("2d");
      let particles = [];

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      function createParticles() {
        particles = [];
        for (let i = 0; i < 60; i++) {
          particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 3 + 1,
            speedX: (Math.random() - 0.5) * 0.5,
            speedY: (Math.random() - 0.5) * 0.5,
          });
        }
      }

      function drawParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "rgba(249,115,22,0.6)"; // Orange tone
        particles.forEach((p) => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fill();
        });
      }

      function updateParticles() {
        particles.forEach((p) => {
          p.x += p.speedX;
          p.y += p.speedY;
          if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
          if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
        });
      }

      function animate() {
        drawParticles();
        updateParticles();
        requestAnimationFrame(animate);
      }

      createParticles();
      animate();

      // Toggle Cleaning Code Visibility
      document.getElementById("toggleCodeBtn").addEventListener("click", function () {
        const codeSection = document.getElementById("cleaningCodeSection");
        const arrow = document.getElementById("arrowIcon");
        const isHidden = codeSection.classList.contains("hidden");
        if (isHidden) {
          codeSection.classList.remove("hidden");
          codeSection.classList.add("fade-in");
          arrow.classList.add("rotate-90");
        } else {
          codeSection.classList.add("hidden");
          codeSection.classList.remove("fade-in");
          arrow.classList.remove("rotate-90");
        }
      });
    </script>
  </body>
</html>
